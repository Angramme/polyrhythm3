(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{3646:function(e,t,n){var r=n(7228);e.exports=function(e){if(Array.isArray(e))return r(e)}},9713:function(e){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},676:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},7375:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}n.d(t,{Z:function(){return r}})},4699:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(2961);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(c){i=!0,o=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(e,t)||(0,r.Z)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},2961:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(676);function i(e,t){if(e){if("string"===typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}},6860:function(e){e.exports=function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},8206:function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},319:function(e,t,n){var r=n(3646),i=n(6860),o=n(379),a=n(8206);e.exports=function(e){return r(e)||i(e)||o(e)||a()}},7079:function(e){function t(e){if("string"==typeof e.source.flags)return e.source.flags;var t=[];return e.global&&t.push("g"),e.ignoreCase&&t.push("i"),e.multiline&&t.push("m"),e.sticky&&t.push("y"),e.unicode&&t.push("u"),t.join("")}e.exports=function e(n){if("function"==typeof n)return n;var r=Array.isArray(n)?[]:{};for(var i in n){var o=n[i],a={}.toString.call(o).slice(8,-1);r[i]="Array"==a||"Object"==a?e(o):"Date"==a?new Date(o.getTime()):"RegExp"==a?RegExp(o.source,t(o)):o}return r}},1751:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return Field}});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5893),_home_runner_work_polyrhythm3_polyrhythm3_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6156),_home_runner_work_polyrhythm3_polyrhythm3_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(7375),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(7294),_hooks_useTheme__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(9442);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,_home_runner_work_polyrhythm3_polyrhythm3_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function eval_math_expr(exp){var reg=/(?:[a-z$_][a-z0-9$_]*)|(?:[;={}\[\]"'!&<>^\\?:])/gi,valid=!0,res=null;if(exp=exp.replace(reg,(function(e){if(Math.hasOwnProperty(e))return"Math."+e;valid=!1})),!valid)return null;try{res=eval(exp)}catch(e){return null}return res}function Field(e){var t=e.className,n=e.type,r=e.style,i=e.onInput,o=(0,_home_runner_work_polyrhythm3_polyrhythm3_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_4__.Z)(e,["className","type","style","onInput"]),a=(0,_hooks_useTheme__WEBPACK_IMPORTED_MODULE_3__.F)(__webpack_require__(9350)),s=(0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(),c=(0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(!1),u=c[0],l=c[1];return(0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)((function(){null!=o.defaultValue&&void 0!=o.defaultValue&&(s.current.value=o.defaultValue)}),[o.defaultValue]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:t,style:r,children:[o.name?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:a.title,children:o.name}):"",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",_objectSpread(_objectSpread({ref:s},o),{},{type:"number"==n?"text":n,className:a.field+(n?" "+a["type-"+n]:"")+(u?" "+a.wrong:""),onInput:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var a=t[0].target,s=a.value;if("number"==n){var c=eval_math_expr(a.value);if(null==c||void 0==c)return l(!0);if(o.min&&c<Number(o.min))return l(!0);if(o.max&&c>Number(o.max))return l(!0);if(o.step&&c%Number(o.step)!=0)return l(!0);s=c}u&&l(!1),i(s)}}))]})}},9442:function(e,t,n){"use strict";n.d(t,{F:function(){return o}});var r=n(4699),i=n(3956);function o(e){return function(e,t){var n=e[t];if(!n)return e;var i={dark:n};return Object.entries(e).forEach((function(e){var o=(0,r.Z)(e,2),a=o[0],s=o[1];a!=t&&(i[a]=s+" "+n)})),i}(e,(0,i.vs)().darkModeActive?"dark":"light")}},8923:function(e,t,n){"use strict";n.r(t),n.d(t,{withScale:function(){return i},addTimes:function(){return o}});var r=n(8333),i=function(e){return function(t){return"".concat(Math.round(r.Time(t).toTicks()*e),"i")}},o=function(e,t){return"".concat(r.Time(e).toTicks()+r.Time(t).toTicks(),"i")}},5960:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(8333),i=n(8923),o=i.withScale,a=i.addTimes;function s(e,t){var n=0;t.forEach((function(t,i){var s=o(t.length)("".concat(1+t.repeat,"m"));t.ratios.forEach((function(i,s){if(!(i<=0))for(var c=t.subdivide[s]||1,u=o(t.length/(i*c))("1n"),l=o(t.offsets[s]||0)(u),d=function(n,a){var u={accent:n%c==0,duration:o(Math.min(.98*t.length/(i*c),.1))("1n"),track:s};r.Transport.schedule((function(t){return e(t,u)}),a)},f=0,_=a(n,l);f<i*c*(1+t.repeat);f++,_=a(_,u))d(f,_)})),r.Transport.schedule((function(e){setTimeout((function(){r.Transport.swing=t.swing}),1e3*(e-r.Transport.now()))}),n),n=a(n,s)}))}},3398:function(e,t,n){"use strict";var r;t.__esModule=!0,t.AmpStateContext=void 0;var i=((r=n(7294))&&r.__esModule?r:{default:r}).default.createContext({});t.AmpStateContext=i},6393:function(e,t,n){"use strict";t.__esModule=!0,t.isInAmpMode=a,t.useAmp=function(){return a(i.default.useContext(o.AmpStateContext))};var r,i=(r=n(7294))&&r.__esModule?r:{default:r},o=n(3398);function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ampFirst,n=void 0!==t&&t,r=e.hybrid,i=void 0!==r&&r,o=e.hasQuery,a=void 0!==o&&o;return n||i&&a}},2775:function(e,t,n){"use strict";var r=n(9713);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}t.__esModule=!0,t.defaultHead=f,t.default=void 0;var o,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(7294)),s=(o=n(3244))&&o.__esModule?o:{default:o},c=n(3398),u=n(1165),l=n(6393);function d(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function f(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[a.default.createElement("meta",{charSet:"utf-8"})];return e||t.push(a.default.createElement("meta",{name:"viewport",content:"width=device-width"})),t}function _(e,t){return"string"===typeof t||"number"===typeof t?e:t.type===a.default.Fragment?e.concat(a.default.Children.toArray(t.props.children).reduce((function(e,t){return"string"===typeof t||"number"===typeof t?e:e.concat(t)}),[])):e.concat(t)}var p=["name","httpEquiv","charSet","itemProp"];function m(e,t){return e.reduce((function(e,t){var n=a.default.Children.toArray(t.props.children);return e.concat(n)}),[]).reduce(_,[]).reverse().concat(f(t.inAmpMode)).filter(function(){var e=new Set,t=new Set,n=new Set,r={};return function(i){var o=!0,a=!1;if(i.key&&"number"!==typeof i.key&&i.key.indexOf("$")>0){a=!0;var s=i.key.slice(i.key.indexOf("$")+1);e.has(s)?o=!1:e.add(s)}switch(i.type){case"title":case"base":t.has(i.type)?o=!1:t.add(i.type);break;case"meta":for(var c=0,u=p.length;c<u;c++){var l=p[c];if(i.props.hasOwnProperty(l))if("charSet"===l)n.has(l)?o=!1:n.add(l);else{var d=i.props[l],f=r[l]||new Set;"name"===l&&a||!f.has(d)?(f.add(d),r[l]=f):o=!1}}}return o}}()).reverse().map((function(e,n){var o=e.key||n;if(!t.inAmpMode&&"link"===e.type&&e.props.href&&["https://fonts.googleapis.com/css","https://use.typekit.net/"].some((function(t){return e.props.href.startsWith(t)}))){var s=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.props||{});return s["data-href"]=s.href,s.href=void 0,s["data-optimized-fonts"]=!0,a.default.cloneElement(e,s)}return a.default.cloneElement(e,{key:o})}))}var h=function(e){var t=e.children,n=(0,a.useContext)(c.AmpStateContext),r=(0,a.useContext)(u.HeadManagerContext);return a.default.createElement(s.default,{reduceComponentsToState:m,headManager:r,inAmpMode:(0,l.isInAmpMode)(n)},t)};t.default=h},3244:function(e,t,n){"use strict";var r=n(319),i=n(4575),o=n(3913),a=(n(1506),n(2205)),s=n(8585),c=n(9754);function u(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}t.__esModule=!0,t.default=void 0;var l=n(7294),d=function(e){a(n,e);var t=u(n);function n(e){var o;return i(this,n),(o=t.call(this,e))._hasHeadManager=void 0,o.emitChange=function(){o._hasHeadManager&&o.props.headManager.updateHead(o.props.reduceComponentsToState(r(o.props.headManager.mountedInstances),o.props))},o._hasHeadManager=o.props.headManager&&o.props.headManager.mountedInstances,o}return o(n,[{key:"componentDidMount",value:function(){this._hasHeadManager&&this.props.headManager.mountedInstances.add(this),this.emitChange()}},{key:"componentDidUpdate",value:function(){this.emitChange()}},{key:"componentWillUnmount",value:function(){this._hasHeadManager&&this.props.headManager.mountedInstances.delete(this),this.emitChange()}},{key:"render",value:function(){return null}}]),n}(l.Component);t.default=d},7558:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return V}});var r=n(5893),i=n(4699),o=n(9008),a=n(7294),s=n(4651),c=n(9442),u=n(676);var l=n(2961);function d(e){return function(e){if(Array.isArray(e))return(0,u.Z)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||(0,l.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e){let t;const n=new Set,r=(e,r)=>{const i="function"===typeof e?e(t):e;if(i!==t){const e=t;t=r?i:Object.assign({},t,i),n.forEach((n=>n(t,e)))}},i=()=>t,o={setState:r,getState:i,subscribe:(e,r,o)=>r||o?((e,r=i,o=Object.is)=>{let a=r(t);function s(){const n=r(t);if(!o(a,n)){const t=a;e(a=n,t)}}return n.add(s),()=>n.delete(s)})(e,r,o):(n.add(e),()=>n.delete(e)),destroy:()=>n.clear()};return t=e(r,i,o),o}const _="undefined"===typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?a.useEffect:a.useLayoutEffect;var p=function(e){const t="function"===typeof e?f(e):e,n=(e=t.getState,n=Object.is)=>{const[,r]=(0,a.useReducer)((e=>e+1),0),i=t.getState(),o=(0,a.useRef)(i),s=(0,a.useRef)(e),c=(0,a.useRef)(n),u=(0,a.useRef)(!1),l=(0,a.useRef)();let d;void 0===l.current&&(l.current=e(i));let f=!1;(o.current!==i||s.current!==e||c.current!==n||u.current)&&(d=e(i),f=!n(l.current,d)),_((()=>{f&&(l.current=d),o.current=i,s.current=e,c.current=n,u.current=!1}));const p=(0,a.useRef)(i);return _((()=>{const e=()=>{try{const e=t.getState(),n=s.current(e);c.current(l.current,n)||(o.current=e,l.current=n,r())}catch(e){u.current=!0,r()}},n=t.subscribe(e);return t.getState()!==p.current&&e(),n}),[]),f?d:l.current};return Object.assign(n,t),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const e=[n,t];return{next(){const t=e.length<=0;return{value:e.shift(),done:t}}}},n};function m(){return window?(window.__my_context||(window.__my_context={_tone:n(8333)}),window.__my_context):null}var h=n(8333);function v(e,t){var n=m();return n.old_synths||(n.old_synths=[]),n.synths=e.slice(0,t).map((function(e,t){if(n.old_synths[t]&&n.old_synths[t][0]&&n.old_synths[t][1]==e){var r=[n.old_synths[t][0],e];return n.old_synths[t][0]=null,r}var o=function(e){return[[function(){return new h.MembraneSynth({pitchDecay:.05,octaves:2,oscillator:{type:"sine"},envelope:{attack:.001,decay:.2,sustain:.05,release:.01,attackCurve:"exponential"}})},function(){return new h.PluckSynth({attackNoise:1,dampening:4e3,resonance:.7})},function(){return new h.Synth({oscillator:{type:"sine",modulationFrequency:.2},envelope:{decay:.1,release:.1}})},function(){return new h.NoiseSynth({volume:-15,filter:{Q:1},envelope:{attack:.01,decay:.15},filterEnvelope:{attack:.01,decay:.03,baseFrequency:4e3,octaves:-2.5,exponent:4}})}][e](),e]}(e),a=(0,i.Z)(o,2),s=a[0],c=a[1];return[s.toMaster(),c]})),n.old_synths&&(n.old_synths.forEach((function(e){var t=(0,i.Z)(e,2),n=t[0];t[1];n&&(n.disconnect(),n.dispose())})),n.old_synths=[]),n.triggers=n.synths.map((function(e){return function(e){var t=(0,i.Z)(e,2),n=t[0];return[function(e,t,r){return n.triggerAttackRelease(r?"E2":"C2",e,t,.8)},function(e,t,r){return n.triggerAttackRelease(r?"C5":"C4",e,t,.2)},function(e,t,r){return n.triggerAttackRelease(r?"C5":"F4",e,t,r?1:.8)},function(e,t,r){return n.triggerAttackRelease(r?"C5":"C4",e,t,.8)}][t[1]]}(e)})),function(){n.triggers=[],n.old_synths=n.synths,n.synths=[]}}var y=p((function(e){return{sections:[{length:1,repeat:0,swing:0,ratios:[1,4],subdivide:[1],offsets:[0]}],curSection:0,editMode:"section",instrumentIDs:Array.from({length:10},(function(e,t){return t%["kick","string","hi-hat","click"].length})),addSection:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{length:1,repeat:0,swing:0,ratios:[1,4],subdivide:[1],offsets:[0]};return e((function(e){return{sections:[].concat(d(e.sections),[t])}}))},setSections:function(t){return e({sections:t})},setInstrumentIDs:function(t){return e({instrumentIDs:t})},setCurSection:function(t){return e({curSection:t})},setEditMode:function(t){return e({editMode:t})},paused:!0,bpm:100,pause:function(){return e({paused:!0})},play:function(){return e({paused:!1})},setBpm:function(t){return e({bpm:t})}}}));var b=function(e,t){if(Object.is(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!Object.is(e[n[r]],t[n[r]]))return!1;return!0},g="_",j="a";var x=n(8193),w=n(9327),O=n(8333);function k(){var e=y((0,a.useCallback)((function(e){return[e.sections,e.addSection,e.curSection,e.setCurSection,e.bpm,e.editMode]}),[]),b),t=(0,i.Z)(e,6),o=t[0],s=t[1],u=t[2],l=t[3],d=t[4],f=t[5],_=(0,c.F)(n(9010)),p=(0,a.useMemo)((function(){return o.reduce((function(e,t){return Math.max(e,t.ratios.length)}),0)}),[o]),m=(0,a.useMemo)((function(){return o.reduce((function(e,t){return e+t.length*(1+t.repeat)}),0)}),[o]),h=(0,a.useRef)(),v=(0,a.useRef)();(0,a.useEffect)((function(){var e=O.Time("1m").toTicks()*m,t=!1,n=0,r=null,i=null,o=function(){r=v.current.offsetWidth,i=.06*r};o(),window.addEventListener("resize",o);return function o(){if(h.current&&v.current){var a=Math.min(r,r*O.Time(O.Transport.position).toTicks()/e);(a=Math.round(a/i)*i)!=n&&(h.current.style.transform="translateX(".concat(a,"px)"),h.current.style.transition=0!=a?"transform ".concat(60*.06*m*4/d,"s linear"):null,n=a),t||requestAnimationFrame(o)}}(),function(){t=!0,window.removeEventListener("resize",o)}}),[v.current,m]);var g=1;return(0,r.jsxs)("div",{style:{position:"relative"},children:[(0,r.jsx)("div",{className:_.add_btn,onClick:function(){return s()},children:(0,r.jsx)(x.Lfi,{style:{verticalAlign:"middle"}})}),(0,r.jsx)("div",{ref:v,className:_.bar_parent,children:(0,r.jsx)("div",{ref:h,className:_.bar})}),(0,r.jsx)("div",{className:_.container,children:o.map((function(e,t){return(0,r.jsx)("div",{className:_.section+(t==u&&o.length>1&&"section"==f?" "+_.current:""),style:{flexBasis:"".concat(100*e.length*(e.repeat+1)/m,"%")},onClick:function(){return l(t)},children:Array.from({length:e.repeat+1},(function(t,n){return(0,r.jsxs)("div",{className:_.section_part+(n>0?" "+_.repeated:"")+(g++%2==0?" "+_.even:""),children:[Array.from({length:p},(function(t,n){var i=e.ratios[n]||0,o=e.subdivide[n]||1,a=e.offsets[n]||0;return(0,r.jsx)("div",{className:_.row,children:Array.from({length:i*o},(function(e,t){return(0,r.jsx)("div",{className:_.dot+(t%o==0?"":" "+_.sub_dot),children:(0,r.jsx)("div",{style:{left:a?"".concat(100*a,"%"):null}})},"dot"+t)}))},"row"+n)})),(0,r.jsx)("div",{className:_.repeat_line,children:(0,r.jsx)(w.oic,{})}),1!=e.length&&0==n?(0,r.jsxs)("div",{className:_.scale_corner,children:[(0,r.jsx)("span",{children:String(e.length).substr(0,4)}),(0,r.jsx)(x.gV0,{style:{verticalAlign:"middle"}})]}):""]},n)}))},"section"+t)}))})]})}var E=n(6156),M=n(1751),P=n(7375);function S(e){var t=e.className,i=(e.name,e.onInput),o=e.defaultValue,s=e.min,u=e.max,l=e.step,f=e.delimiter,_=((0,P.Z)(e,["className","name","onInput","defaultValue","min","max","step","delimiter"]),(0,c.F)(n(454))),p=(0,a.useMemo)((function(){return(o||"").split(f||":").map(Number)}),[o,f]),m=(0,a.useState)(p),h=m[0],v=m[1];return(0,a.useEffect)((function(){i&&i(h)}),[h]),(0,a.useEffect)((function(){v(p)}),[p]),(0,r.jsxs)("div",{className:_.container+(t?" "+t:""),children:[(0,r.jsx)("div",{className:_.ratios,children:h.map((function(e,t){return(0,r.jsxs)("div",{children:[(0,r.jsx)(M.Z,{className:_.field,defaultValue:e,type:"number",step:l,min:s,max:u,onInput:function(e){e.length<=0||("0"==e&&t==h.length-1?h.splice(t,1):h[t]=Number(e),v(d(h)))}}),t<h.length-1?(0,r.jsx)("div",{className:_.delimiter,children:" : "}):""]},t)}))}),(0,r.jsx)("div",{className:_.add_btn,onClick:function(){return v([].concat(d(h),[s||0]))},children:(0,r.jsx)(x.Lfi,{style:{verticalAlign:"middle"}})})]})}var N=n(7079),C=n.n(N);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){(0,E.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(){var e=y((0,a.useCallback)((function(e){return[e.sections,e.setSections,e.curSection,e.setCurSection]}),[]),b),t=(0,i.Z)(e,4),o=t[0],s=t[1],u=t[2],l=t[3],d=(0,c.F)(n(17)),f=(0,a.useMemo)((function(){return o[u]}),[o,u]),_=function(e){return function(t){null!=t&&void 0!=t&&(e(t),s(C()(o)))}};return(0,r.jsx)("div",{className:d.container,children:(0,r.jsxs)("div",{className:d.flex_container,children:[(0,r.jsx)("table",{className:d.table,children:(0,r.jsxs)("tbody",{children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"ratios"}),(0,r.jsx)("td",{children:(0,r.jsx)(S,{className:d.picker,name:"ratios",defaultValue:f.ratios.join(":"),min:0,step:1,onInput:_((function(e){return f.ratios=e}))})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"subdivides"}),(0,r.jsx)("td",{children:(0,r.jsx)(S,{name:"subdivide",defaultValue:f.subdivide.join(":"),step:1,min:1,onInput:_((function(e){return f.subdivide=e}))})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"offsets"}),(0,r.jsx)("td",{children:(0,r.jsx)(S,{name:"offsets",defaultValue:f.offsets.join(":"),max:1,min:0,onInput:_((function(e){return f.offsets=e}))})})]})]})}),(0,r.jsx)("table",{className:d.single_fields+" "+d.table,children:(0,r.jsxs)("tbody",{children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"scale"}),(0,r.jsx)("td",{children:(0,r.jsx)(M.Z,{type:"number",min:"0",defaultValue:f.length,onInput:_((function(e){return f.length=e}))})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"repeat"}),(0,r.jsx)("td",{children:(0,r.jsx)(M.Z,{type:"number",step:"1",min:"0",defaultValue:f.repeat,onInput:_((function(e){return f.repeat=e}))})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"swing"}),(0,r.jsx)("td",{children:(0,r.jsx)(M.Z,{type:"number",min:"0",max:"1",defaultValue:f.swing,onInput:_((function(e){return f.swing=e}))})})]}),(0,r.jsxs)("tr",{className:d.remove_btn,children:[(0,r.jsx)("th",{children:"remove"}),(0,r.jsx)("td",{children:(0,r.jsx)(M.Z,D(D({type:"button",value:"remove"},o.length<=1?{disabled:!0}:{}),{},{onClick:_((function(){if(o.length>1)return l(Math.max(0,u-1)),o.splice(o.indexOf(f),1)}))}))})]})]})})]})})}var I=n(9352);function R(e){var t=e.style,o=y((0,a.useCallback)((function(e){return[e.paused,e.pause,e.play,e.bpm,e.setBpm,e.editMode,e.setEditMode]}),[]),b),s=(0,i.Z)(o,7),u=s[0],l=s[1],d=s[2],f=s[3],_=s[4],p=s[5],m=s[6],h=(0,c.F)(n(8944));return(0,r.jsx)("div",{className:h.container,style:t,children:(0,r.jsxs)("div",{className:h.transport_bar,children:[(0,r.jsx)("div",{className:h.transport_button,onClick:(0,a.useCallback)((function(){return(u?d:l)()}),[u]),children:u?(0,r.jsx)(I.hpr,{style:{verticalAlign:"middle"}}):(0,r.jsx)(I.bKE,{style:{verticalAlign:"middle"}})}),(0,r.jsx)("div",{className:h.transport_button,onClick:(0,a.useCallback)((function(){n(8333).Transport.stop(),l()}),[]),children:(0,r.jsx)(I.vJm,{style:{verticalAlign:"middle"}})}),(0,r.jsx)("div",{style:{paddingLeft:"2em",paddingRight:".5em"},children:"bpm"}),(0,r.jsx)("div",{children:(0,r.jsx)(M.Z,{style:{width:"4em"},type:"number",defaultValue:f,onInput:function(e){return _(e)}})}),(0,r.jsx)("div",{className:h.settings_button+("instrument"==p?" "+h.edit_mode:""),onClick:(0,a.useCallback)((function(){return m("section"==p?"instrument":"section")}),[p]),children:(0,r.jsx)(I.XkT,{style:{verticalAlign:"middle"}})})]})})}var Z=n(7516),W=n(7735);function L(e){navigator.clipboard?navigator.clipboard.writeText(e):function(e){var t=document.createElement("textarea");t.value=e,t.style.top="0",t.style.left="0",t.style.position="fixed",document.body.appendChild(t),t.focus(),t.select();try{document.execCommand("copy")}catch(n){console.error("Fallback: Oops, unable to copy",n)}document.body.removeChild(t)}(e)}var B=n(3956);function F(){var e=(0,c.F)(n(8674)),t=(0,B.vs)(),o=t.darkModeActive,s=t.switchToDarkMode,u=t.switchToLightMode;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:e.left,children:[(0,r.jsxs)("div",{className:e.button,children:[(0,r.jsx)("a",{href:"https://ozi.vercel.app",target:"_blank",children:(0,r.jsx)(W.Tqn,{style:{verticalAlign:"middle"}})}),(0,r.jsx)("div",{className:e.tooltip,children:"my website"})]}),(0,r.jsxs)("div",{className:e.button,children:[(0,r.jsx)("a",{href:"https://www.buymeacoffee.com/angramme",target:"_blank",children:(0,r.jsx)(Z.vm6,{style:{verticalAlign:"middle"}})}),(0,r.jsx)("div",{className:e.tooltip,children:"buy me a coffee"})]})]}),(0,r.jsxs)("div",{className:e.right,children:[(0,r.jsxs)("div",{className:e.button,children:[(0,r.jsx)(Z.Ifu,{style:{verticalAlign:"middle"},onClick:(0,a.useCallback)((function(){var e,t,n=y.getState(),r=window.location.origin+window.location.pathname+(e=n.sections,t=n.bpm,"?"+Object.entries({lengths:e.map((function(e){return e.length})).join(g),repeats:e.map((function(e){return e.repeat})).join(g),swings:e.map((function(e){return e.swing})).join(g),ratios:e.map((function(e){return e.ratios.join(j)})).join(g),subdivides:e.map((function(e){return e.subdivide.join(j)})).join(g),offsets:e.map((function(e){return e.offsets.join(j)})).join(g),bpm:t}).map((function(e){var t=(0,i.Z)(e,2),n=t[0],r=t[1];return"&".concat(n,"=").concat(r)})).join("").slice(1));console.log(r),L(r),setTimeout((function(){return alert("copied the url to clipboard!")}),100)}),[])}),(0,r.jsx)("div",{className:e.tooltip,children:"share your rhythm"})]}),(0,r.jsxs)("div",{className:e.button,children:[(0,r.jsx)(W.ojp,{style:{verticalAlign:"middle",cursor:"not-allowed"}}),(0,r.jsx)("div",{className:e.tooltip,children:"export midi"})]}),(0,r.jsxs)("div",{className:e.button,children:[(0,r.jsx)("span",{onClick:function(){return o?u():s()},children:o?(0,r.jsx)(Z.dZ3,{style:{verticalAlign:"middle"}}):(0,r.jsx)(Z.JuG,{style:{verticalAlign:"middle"}})}),(0,r.jsxs)("div",{className:e.tooltip,children:["switch to ",o?"light":"dark"," mode"]})]})]})]})}function q(e){var t=e.style,o=y((0,a.useCallback)((function(e){return[e.instrumentIDs,e.setInstrumentIDs]}),[]),b),s=(0,i.Z)(o,2),u=s[0],l=s[1],d=(0,c.F)(n(2887)),f=["kick","string","hi-hat","click"];return(0,r.jsx)("div",{className:d.container,style:t,children:u.map((function(e,t){return(0,r.jsxs)("div",{className:d.instrument,children:[(0,r.jsxs)("div",{className:d.header,children:["track ",t+1," uses"]}),(0,r.jsx)("div",{className:d.body,children:(0,r.jsx)("select",{defaultValue:e,onChange:(n=t,function(e){var t=e.target,r=Number(t.value);u[n]=r,l(C()(u))}),children:f.map((function(e,t){return(0,r.jsx)("option",{value:t,children:e},t)}))},t)})]},t);var n}))})}function K(){var e=(0,c.F)(n(7314)),t=y((0,a.useCallback)((function(e){return e.editMode}),[]));return(0,r.jsxs)("div",{className:e.container,children:[(0,r.jsx)(k,{}),(0,r.jsx)(R,{}),"section"==t?(0,r.jsx)(T,{}):"","instrument"==t?(0,r.jsx)(q,{}):"",(0,r.jsx)(F,{})]})}var U=n(8333);function V(){var e=(0,c.F)(n(9111));(0,a.useEffect)((function(){var e=0;return y.subscribe((function(t,n){e++,console.log("state update",e)}))}),[]);var t=y((0,a.useCallback)((function(e){return[e.paused,e.bpm,e.setBpm,e.sections,e.setSections,e.instrumentIDs]}),[]),b),u=(0,i.Z)(t,6),l=u[0],d=u[1],f=u[2],_=u[3],p=u[4],h=u[5];(0,a.useEffect)((function(){l?U.Transport.pause():U.Transport.start()}),[l]),(0,a.useEffect)((function(){U.Transport.bpm.rampTo(d,.2)}),[d]),(0,a.useEffect)((function(){var e=function(){U.start(),U.context.resume()};return window.addEventListener("click",e),function(){window.removeEventListener("click",e)}}),[]);var x=(0,a.useMemo)((function(){return _.reduce((function(e,t){return Math.max(e,t.ratios.length)}),-1)}),[_]);(0,a.useEffect)((function(){return v(h,x)}),[h,x]),(0,a.useEffect)((function(){var e=n(8923).withScale,t=n(5960).Z,r=_.reduce((function(e,t){return e+t.length*(t.repeat+1)}),0);return U.Transport.loop=!0,U.Transport.loopStart=0,U.Transport.loopEnd=e(r)("1m"),U.Transport.timeSignature=[4,4],t((function(e,t){var n=t.accent,r=t.duration,i=t.track,o=m().triggers[i];try{o(r,e,n)}catch(a){}}),_),function(){U.Transport.cancel(0)}}),[_]),(0,a.useEffect)((function(){!function(e){var t=document.querySelector("link[rel~='icon']");t||(t=Array.from(document.getElementsByTagName("head")[0].getElementsByTagName("link")).find((function(e){return"icon"==e.rel}))),t.href=e}(function(e){var t=document.createElement("canvas"),n=32;t.width=t.height=n;var r=t.getContext("2d");return r.font="".concat(16,"px Helvetica, Arial, sans-serif"),r.fillStyle="yellow",r.fillRect(0,0,n,n),r.fillStyle="black",r.textAlign="center",r.textBaseline="middle",e.forEach((function(t,i){r.fillText(t.ratios.join(":"),16,22.4/e.length*(.7+i)+(1-.7)*n/2|0)})),t.toDataURL()}(_))}),[_]);var w=(0,s.useRouter)();return(0,a.useEffect)((function(){Object.keys(w.query).length<=0||(console.log("found state in url, proceeding to load..."),p(function(e){var t=e.lengths.split(g).map(Number),n=e.repeats.split(g).map(Number),r=e.swings.split(g).map(Number),i=e.ratios.split(g).map((function(e){return e.split(j).map(Number)})),o=e.subdivides.split(g).map((function(e){return e.split(j).map(Number)})),a=e.offsets.split(g).map((function(e){return e.split(j).map(Number)}));return t.map((function(e,t){return{length:e,repeat:n[t],swing:r[t],ratios:i[t],subdivide:o[t],offsets:a[t]}}))}(w.query)),f(Number(w.query.bpm)),window.history.replaceState({},document.title,window.location.pathname))}),[w.query]),(0,r.jsxs)("div",{className:e.container,children:[(0,r.jsxs)(o.default,{children:[(0,r.jsx)("title",{children:"Polyrhythm Metronome"}),(0,r.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,r.jsx)(K,{})]})}},8581:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(7558)}])},9111:function(e){e.exports={container:"Home_container__Wh7XK",dark:"Home_dark__1uG_o"}},8944:function(e){e.exports={container:"controls_container__22oWk",dark:"controls_dark__1VOYX",title:"controls_title__3WJyw",table:"controls_table__1DijQ",button:"controls_button__EaMER",transport_bar:"controls_transport_bar__3M1pq",transport_button:"controls_transport_button__3Pyy8",settings_button:"controls_settings_button__tzkt9",edit_mode:"controls_edit_mode__Ng9Dy"}},17:function(e){e.exports={container:"editor_container__2mZnH",dark:"editor_dark__3t4Ar",flex_container:"editor_flex_container__3S1X8",single_fields:"editor_single_fields__2aMR1",table:"editor_table__1A9Fo"}},9350:function(e){e.exports={field:"field_field__Z0iYv",dark:"field_dark__xwdXU",wrong:"field_wrong__1qZDj","type-button":"field_type-button__2UptW",title:"field_title__3fwXR"}},2887:function(e){e.exports={container:"instruments_container__1md3q",dark:"instruments_dark__2O99g",instrument:"instruments_instrument__-2oBe",header:"instruments_header__HYAUR"}},7314:function(e){e.exports={container:"main_container__yatPY"}},454:function(e){e.exports={container:"ratiopicker_container__11pO8",ratios:"ratiopicker_ratios__2iFKo",field:"ratiopicker_field__3riwq",add_btn:"ratiopicker_add_btn__3BReu",dark:"ratiopicker_dark__2QkeK",delimiter:"ratiopicker_delimiter__2yDzF"}},8674:function(e){e.exports={left:"topbar_left__3TYGQ",right:"topbar_right__bjyW8",dark:"topbar_dark__3Htdg",button:"topbar_button__kB-OR",tooltip:"topbar_tooltip__OLu0S"}},9010:function(e){e.exports={container:"visualisation_container__3U4Po",dark:"visualisation_dark__1pDSf",section:"visualisation_section__29yIE",current:"visualisation_current__3KWCF",section_part:"visualisation_section_part__3diQj",even:"visualisation_even__3KZ7_",repeat_line:"visualisation_repeat_line__1P_Pt",scale_corner:"visualisation_scale_corner__IdM7l",repeated:"visualisation_repeated__3O86J",row:"visualisation_row__3qPv9",dot:"visualisation_dot__1dlGL",sub_dot:"visualisation_sub_dot__3bjAw",add_btn:"visualisation_add_btn__2ir6S",bar_parent:"visualisation_bar_parent__2PEN8",bar:"visualisation_bar__19byd"}},9008:function(e,t,n){e.exports=n(2775)},4405:function(e,t,n){"use strict";n.d(t,{w_:function(){return u}});var r=n(7294),i={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},o=r.createContext&&r.createContext(i),a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function c(e){return e&&e.map((function(e,t){return r.createElement(e.tag,a({key:t},e.attr),c(e.child))}))}function u(e){return function(t){return r.createElement(l,a({attr:a({},e.attr)},t),c(e.child))}}function l(e){var t=function(t){var n,i=e.attr,o=e.size,c=e.title,u=s(e,["attr","size","title"]),l=o||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),r.createElement("svg",a({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,u,{className:n,style:a(a({color:e.color||t.color},t.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),c&&r.createElement("title",null,c),e.children)};return void 0!==o?r.createElement(o.Consumer,null,(function(e){return t(e)})):t(i)}}},function(e){e.O(0,[757,90,415,937,874,617,774,888,179],(function(){return t=8581,e(e.s=t);var t}));var t=e.O();_N_E=t}]);